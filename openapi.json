{"openapi":"3.1.0","info":{"title":"llm-fs API","description":"LLM tracing and observability API","license":{"name":""},"version":"0.1.0"},"paths":{"/api/openapi.json":{"get":{"tags":["docs"],"summary":"Get OpenAPI specification","operationId":"openapi_spec","responses":{"200":{"description":"OpenAPI JSON specification"}}}}},"components":{"schemas":{"AnalyticsFilter":{"type":"object","properties":{"kind":{"type":["string","null"]},"model":{"type":["string","null"]},"provider":{"type":["string","null"]},"since":{"type":["string","null"],"format":"date-time"},"status":{"type":["string","null"]},"trace_id":{"type":["string","null"]},"until":{"type":["string","null"],"format":"date-time"}}},"AnalyticsGroup":{"type":"object","required":["key","metrics"],"properties":{"key":{"type":"object","additionalProperties":{"type":"string"},"propertyNames":{"type":"string"}},"metrics":{"$ref":"#/components/schemas/MetricValues"}}},"AnalyticsMetric":{"type":"string","enum":["total_cost","total_input_tokens","total_output_tokens","total_tokens","avg_latency_ms","span_count","error_count"]},"AnalyticsQuery":{"type":"object","required":["metrics"],"properties":{"filter":{"$ref":"#/components/schemas/AnalyticsFilter"},"group_by":{"type":"array","items":{"$ref":"#/components/schemas/GroupByField"}},"metrics":{"type":"array","items":{"$ref":"#/components/schemas/AnalyticsMetric"}}}},"AnalyticsResponse":{"type":"object","required":["groups","totals"],"properties":{"groups":{"type":"array","items":{"$ref":"#/components/schemas/AnalyticsGroup"}},"totals":{"$ref":"#/components/schemas/MetricValues"}}},"AnalyticsSummary":{"type":"object","required":["total_traces","total_spans","total_llm_calls","total_cost","total_tokens","avg_latency_ms","error_count","models_used","providers_used","cost_by_model","tokens_by_model"],"properties":{"avg_latency_ms":{"type":"number","format":"double"},"cost_by_model":{"type":"array","items":{"$ref":"#/components/schemas/ModelCost"}},"error_count":{"type":"integer","minimum":0},"models_used":{"type":"array","items":{"type":"string"}},"providers_used":{"type":"array","items":{"type":"string"}},"tokens_by_model":{"type":"array","items":{"$ref":"#/components/schemas/ModelTokens"}},"total_cost":{"type":"number","format":"double"},"total_llm_calls":{"type":"integer","minimum":0},"total_spans":{"type":"integer","minimum":0},"total_tokens":{"type":"integer","format":"int64","minimum":0},"total_traces":{"type":"integer","minimum":0}}},"ClaimRequest":{"type":"object","required":["claimed_by"],"properties":{"claimed_by":{"type":"string"}}},"ClearedAll":{"type":"object","required":["message"],"properties":{"message":{"type":"string"}}},"CompleteSpanRequest":{"type":"object","properties":{"output":{}}},"CreateDatapointRequest":{"type":"object","required":["kind"],"properties":{"kind":{"$ref":"#/components/schemas/DatapointKind"}}},"CreateDatasetRequest":{"type":"object","required":["name"],"properties":{"description":{"type":["string","null"]},"name":{"type":"string"}}},"CreateSpanRequest":{"type":"object","required":["trace_id","name","kind"],"properties":{"input":{},"kind":{"$ref":"#/components/schemas/SpanKind"},"name":{"type":"string"},"parent_id":{"type":["string","null"]},"trace_id":{"type":"string"}}},"CreateTraceRequest":{"type":"object","properties":{"name":{"type":["string","null"]},"tags":{"type":"array","items":{"type":"string"}}}},"CreatedSpan":{"type":"object","required":["id","trace_id"],"properties":{"id":{"type":"string"},"trace_id":{"type":"string"}}},"Datapoint":{"type":"object","required":["id","dataset_id","kind","source","created_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"dataset_id":{"type":"string"},"id":{"type":"string"},"kind":{"$ref":"#/components/schemas/DatapointKind"},"source":{"$ref":"#/components/schemas/DatapointSource"},"source_span_id":{"type":["string","null"]}}},"DatapointKind":{"oneOf":[{"type":"object","required":["messages","type"],"properties":{"expected":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/Message"}]},"messages":{"type":"array","items":{"$ref":"#/components/schemas/Message"}},"metadata":{"type":"object","additionalProperties":{},"propertyNames":{"type":"string"}},"type":{"type":"string","enum":["llm_conversation"]}}},{"type":"object","required":["input","type"],"properties":{"actual_output":{},"expected_output":{},"input":{},"metadata":{"type":"object","additionalProperties":{},"propertyNames":{"type":"string"}},"score":{"type":["number","null"],"format":"double"},"type":{"type":"string","enum":["generic"]}}}]},"DatapointListResponse":{"type":"object","required":["datapoints","count"],"properties":{"count":{"type":"integer","minimum":0},"datapoints":{"type":"array","items":{"$ref":"#/components/schemas/Datapoint"}}}},"DatapointSource":{"type":"string","enum":["manual","span_export","file_upload"]},"Dataset":{"type":"object","required":["id","name","created_at","updated_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"description":{"type":["string","null"]},"id":{"type":"string"},"name":{"type":"string"},"org_id":{"type":["string","null"]},"updated_at":{"type":"string","format":"date-time"}}},"DatasetListResponse":{"type":"object","required":["datasets","count"],"properties":{"count":{"type":"integer","minimum":0},"datasets":{"type":"array","items":{"$ref":"#/components/schemas/DatasetResponse"}}}},"DatasetResponse":{"allOf":[{"$ref":"#/components/schemas/Dataset"},{"type":"object","required":["datapoint_count"],"properties":{"datapoint_count":{"type":"integer","minimum":0}}}]},"DeletedTrace":{"type":"object","required":["trace_id","spans_deleted"],"properties":{"spans_deleted":{"type":"integer","minimum":0},"trace_id":{"type":"string"}}},"EnqueueRequest":{"type":"object","required":["datapoint_ids"],"properties":{"datapoint_ids":{"type":"array","items":{"type":"string"}}}},"EnqueueResponse":{"type":"object","required":["enqueued"],"properties":{"enqueued":{"type":"integer","minimum":0}}},"ExportData":{"type":"object","required":["traces"],"properties":{"traces":{"type":"object","additionalProperties":{"type":"array","items":{"$ref":"#/components/schemas/Span"}},"propertyNames":{"type":"string"}}}},"ExportParams":{"type":"object","properties":{"trace_id":{"type":["string","null"]}}},"ExportSpanRequest":{"type":"object","required":["span_id"],"properties":{"span_id":{"type":"string"}}},"FailSpanRequest":{"type":"object","required":["error"],"properties":{"error":{"type":"string"}}},"FileListResponse":{"type":"object","required":["files","count"],"properties":{"count":{"type":"integer","minimum":0},"files":{"type":"array","items":{"$ref":"#/components/schemas/FileVersion"}}}},"FileQueryParams":{"type":"object","properties":{"path_prefix":{"type":["string","null"]},"since":{"type":["string","null"],"format":"date-time"},"until":{"type":["string","null"],"format":"date-time"}}},"FileVersion":{"type":"object","required":["hash","path","size","created_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"created_by_span":{"type":["string","null"]},"hash":{"type":"string"},"path":{"type":"string"},"size":{"type":"integer","format":"int64","minimum":0}}},"FileVersionsResponse":{"type":"object","required":["path","versions","count"],"properties":{"count":{"type":"integer","minimum":0},"path":{"type":"string"},"versions":{"type":"array","items":{"$ref":"#/components/schemas/FileVersion"}}}},"GroupByField":{"type":"string","enum":["model","provider","kind","status","trace","day","hour"]},"HealthResponse":{"type":"object","required":["status","uptime_secs","version","storage"],"properties":{"instance":{"type":["string","null"]},"region":{"type":["string","null"]},"status":{"type":"string"},"storage":{"$ref":"#/components/schemas/StorageHealth"},"uptime_secs":{"type":"integer","format":"int64","minimum":0},"version":{"type":"string"}}},"ImportResponse":{"type":"object","required":["imported","dataset_id"],"properties":{"dataset_id":{"type":"string"},"imported":{"type":"integer","minimum":0}}},"Message":{"type":"object","required":["role","content"],"properties":{"content":{"type":"string"},"role":{"type":"string"}}},"MetricValues":{"type":"object","properties":{"avg_latency_ms":{"type":["number","null"],"format":"double"},"error_count":{"type":["integer","null"],"format":"int64","minimum":0},"span_count":{"type":["integer","null"],"format":"int64","minimum":0},"total_cost":{"type":["number","null"],"format":"double"},"total_input_tokens":{"type":["integer","null"],"format":"int64","minimum":0},"total_output_tokens":{"type":["integer","null"],"format":"int64","minimum":0},"total_tokens":{"type":["integer","null"],"format":"int64","minimum":0}}},"ModelCost":{"type":"object","required":["model","cost","span_count"],"properties":{"cost":{"type":"number","format":"double"},"model":{"type":"string"},"span_count":{"type":"integer","minimum":0}}},"ModelTokens":{"type":"object","required":["model","input_tokens","output_tokens","total_tokens"],"properties":{"input_tokens":{"type":"integer","format":"int64","minimum":0},"model":{"type":"string"},"output_tokens":{"type":"integer","format":"int64","minimum":0},"total_tokens":{"type":"integer","format":"int64","minimum":0}}},"QueueCounts":{"type":"object","required":["pending","claimed","completed"],"properties":{"claimed":{"type":"integer","minimum":0},"completed":{"type":"integer","minimum":0},"pending":{"type":"integer","minimum":0}}},"QueueItem":{"type":"object","required":["id","dataset_id","datapoint_id","status","created_at"],"properties":{"claimed_at":{"type":["string","null"],"format":"date-time"},"claimed_by":{"type":["string","null"]},"created_at":{"type":"string","format":"date-time"},"datapoint_id":{"type":"string"},"dataset_id":{"type":"string"},"edited_data":{},"id":{"type":"string"},"original_data":{},"status":{"$ref":"#/components/schemas/QueueItemStatus"}}},"QueueItemStatus":{"type":"string","enum":["pending","claimed","completed"]},"QueueListResponse":{"type":"object","required":["items","counts"],"properties":{"counts":{"$ref":"#/components/schemas/QueueCounts"},"items":{"type":"array","items":{"$ref":"#/components/schemas/QueueItem"}}}},"Span":{"type":"object","required":["id","trace_id","name","kind","status","started_at"],"properties":{"ended_at":{"type":["string","null"],"format":"date-time"},"id":{"type":"string"},"input":{},"kind":{"$ref":"#/components/schemas/SpanKind"},"name":{"type":"string"},"org_id":{"type":["string","null"]},"output":{},"parent_id":{"type":["string","null"]},"started_at":{"type":"string","format":"date-time"},"status":{"$ref":"#/components/schemas/SpanStatus"},"trace_id":{"type":"string"}}},"SpanKind":{"oneOf":[{"type":"object","required":["path","bytes_read","type"],"properties":{"bytes_read":{"type":"integer","format":"int64","minimum":0},"file_version":{"type":["string","null"]},"path":{"type":"string"},"type":{"type":"string","enum":["fs_read"]}}},{"type":"object","required":["path","file_version","bytes_written","type"],"properties":{"bytes_written":{"type":"integer","format":"int64","minimum":0},"file_version":{"type":"string"},"path":{"type":"string"},"type":{"type":"string","enum":["fs_write"]}}},{"type":"object","required":["model","type"],"properties":{"cost":{"type":["number","null"],"format":"double"},"input_preview":{"type":["string","null"]},"input_tokens":{"type":["integer","null"],"format":"int64","minimum":0},"model":{"type":"string"},"output_preview":{"type":["string","null"]},"output_tokens":{"type":["integer","null"],"format":"int64","minimum":0},"provider":{"type":["string","null"]},"type":{"type":"string","enum":["llm_call"]}}},{"type":"object","required":["kind","type"],"properties":{"attributes":{"type":"object","additionalProperties":{},"propertyNames":{"type":"string"}},"kind":{"type":"string"},"type":{"type":"string","enum":["custom"]}}}]},"SpanList":{"type":"object","required":["spans","count"],"properties":{"count":{"type":"integer","minimum":0},"spans":{"type":"array","items":{"$ref":"#/components/schemas/Span"}}}},"SpanQueryParams":{"type":"object","properties":{"kind":{"type":["string","null"]},"model":{"type":["string","null"]},"name_contains":{"type":["string","null"]},"path":{"type":["string","null"]},"provider":{"type":["string","null"]},"since":{"type":["string","null"],"format":"date-time"},"status":{"type":["string","null"]},"trace_id":{"type":["string","null"]},"until":{"type":["string","null"],"format":"date-time"}}},"SpanStatus":{"oneOf":[{"type":"string","enum":["running"]},{"type":"string","enum":["completed"]},{"type":"object","required":["failed"],"properties":{"failed":{"type":"object","required":["error"],"properties":{"error":{"type":"string"}}}}}]},"Stats":{"type":"object","required":["trace_count","span_count"],"properties":{"span_count":{"type":"integer","minimum":0},"trace_count":{"type":"integer","minimum":0}}},"StorageHealth":{"type":"object","required":["trace_count","span_count","backend"],"properties":{"backend":{"type":"string"},"span_count":{"type":"integer","minimum":0},"trace_count":{"type":"integer","minimum":0}}},"SubmitRequest":{"type":"object","properties":{"edited_data":{}}},"Trace":{"type":"object","required":["id","started_at"],"properties":{"ended_at":{"type":["string","null"],"format":"date-time"},"id":{"type":"string"},"machine_id":{"type":["string","null"]},"name":{"type":["string","null"]},"org_id":{"type":["string","null"]},"started_at":{"type":"string","format":"date-time"},"tags":{"type":"array","items":{"type":"string"}}}},"TraceListResponse":{"type":"object","required":["traces","count"],"properties":{"count":{"type":"integer","minimum":0},"traces":{"type":"array","items":{"$ref":"#/components/schemas/Trace"}}}},"TrackedFile":{"type":"object","required":["path","current_hash","created_at","updated_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"current_hash":{"type":"string"},"path":{"type":"string"},"updated_at":{"type":"string","format":"date-time"}}},"UpdateDatasetRequest":{"type":"object","properties":{"description":{"type":["string","null"]},"name":{"type":["string","null"]}}}}}}