{"components": {"schemas": {"AnalyticsFilter": {"properties": {"kind": {"type": ["string", "null"]}, "model": {"type": ["string", "null"]}, "provider": {"type": ["string", "null"]}, "since": {"format": "date-time", "type": ["string", "null"]}, "status": {"type": ["string", "null"]}, "trace_id": {"type": ["string", "null"]}, "until": {"format": "date-time", "type": ["string", "null"]}}, "type": "object"}, "AnalyticsGroup": {"properties": {"key": {"additionalProperties": {"type": "string"}, "propertyNames": {"type": "string"}, "type": "object"}, "metrics": {"$ref": "#/components/schemas/MetricValues"}}, "required": ["key", "metrics"], "type": "object"}, "AnalyticsMetric": {"enum": ["total_cost", "total_input_tokens", "total_output_tokens", "total_tokens", "avg_latency_ms", "span_count", "error_count"], "type": "string"}, "AnalyticsQuery": {"properties": {"filter": {"$ref": "#/components/schemas/AnalyticsFilter"}, "group_by": {"items": {"$ref": "#/components/schemas/GroupByField"}, "type": "array"}, "metrics": {"items": {"$ref": "#/components/schemas/AnalyticsMetric"}, "type": "array"}}, "required": ["metrics"], "type": "object"}, "AnalyticsResponse": {"properties": {"groups": {"items": {"$ref": "#/components/schemas/AnalyticsGroup"}, "type": "array"}, "totals": {"$ref": "#/components/schemas/MetricValues"}}, "required": ["groups", "totals"], "type": "object"}, "AnalyticsSummary": {"properties": {"avg_latency_ms": {"format": "double", "type": "number"}, "cost_by_model": {"items": {"$ref": "#/components/schemas/ModelCost"}, "type": "array"}, "error_count": {"minimum": 0, "type": "integer"}, "models_used": {"items": {"type": "string"}, "type": "array"}, "providers_used": {"items": {"type": "string"}, "type": "array"}, "tokens_by_model": {"items": {"$ref": "#/components/schemas/ModelTokens"}, "type": "array"}, "total_cost": {"format": "double", "type": "number"}, "total_llm_calls": {"minimum": 0, "type": "integer"}, "total_spans": {"minimum": 0, "type": "integer"}, "total_tokens": {"format": "int64", "minimum": 0, "type": "integer"}, "total_traces": {"minimum": 0, "type": "integer"}}, "required": ["total_traces", "total_spans", "total_llm_calls", "total_cost", "total_tokens", "avg_latency_ms", "error_count", "models_used", "providers_used", "cost_by_model", "tokens_by_model"], "type": "object"}, "ClaimRequest": {"properties": {"claimed_by": {"type": "string"}}, "required": ["claimed_by"], "type": "object"}, "ClearedAll": {"properties": {"message": {"type": "string"}}, "required": ["message"], "type": "object"}, "CompleteSpanRequest": {"properties": {"output": {}}, "type": "object"}, "CreateDatapointRequest": {"properties": {"kind": {"$ref": "#/components/schemas/DatapointKind"}}, "required": ["kind"], "type": "object"}, "CreateDatasetRequest": {"properties": {"description": {"type": ["string", "null"]}, "name": {"type": "string"}}, "required": ["name"], "type": "object"}, "CreateSpanRequest": {"properties": {"input": {}, "kind": {"$ref": "#/components/schemas/SpanKind"}, "name": {"type": "string"}, "parent_id": {"type": ["string", "null"]}, "trace_id": {"type": "string"}}, "required": ["trace_id", "name", "kind"], "type": "object"}, "CreateTraceRequest": {"properties": {"name": {"type": ["string", "null"]}, "tags": {"items": {"type": "string"}, "type": "array"}}, "type": "object"}, "CreatedSpan": {"properties": {"id": {"type": "string"}, "trace_id": {"type": "string"}}, "required": ["id", "trace_id"], "type": "object"}, "Datapoint": {"properties": {"created_at": {"format": "date-time", "type": "string"}, "dataset_id": {"type": "string"}, "id": {"type": "string"}, "kind": {"$ref": "#/components/schemas/DatapointKind"}, "source": {"$ref": "#/components/schemas/DatapointSource"}, "source_span_id": {"type": ["string", "null"]}}, "required": ["id", "dataset_id", "kind", "source", "created_at"], "type": "object"}, "DatapointKind": {"oneOf": [{"properties": {"expected": {"oneOf": [{"type": "null"}, {"$ref": "#/components/schemas/Message"}]}, "messages": {"items": {"$ref": "#/components/schemas/Message"}, "type": "array"}, "metadata": {"additionalProperties": {}, "propertyNames": {"type": "string"}, "type": "object"}, "type": {"enum": ["llm_conversation"], "type": "string"}}, "required": ["messages", "type"], "type": "object"}, {"properties": {"actual_output": {}, "expected_output": {}, "input": {}, "metadata": {"additionalProperties": {}, "propertyNames": {"type": "string"}, "type": "object"}, "score": {"format": "double", "type": ["number", "null"]}, "type": {"enum": ["generic"], "type": "string"}}, "required": ["input", "type"], "type": "object"}]}, "DatapointListResponse": {"properties": {"count": {"minimum": 0, "type": "integer"}, "datapoints": {"items": {"$ref": "#/components/schemas/Datapoint"}, "type": "array"}}, "required": ["datapoints", "count"], "type": "object"}, "DatapointSource": {"enum": ["manual", "span_export", "file_upload"], "type": "string"}, "Dataset": {"properties": {"created_at": {"format": "date-time", "type": "string"}, "description": {"type": ["string", "null"]}, "id": {"type": "string"}, "name": {"type": "string"}, "org_id": {"type": ["string", "null"]}, "updated_at": {"format": "date-time", "type": "string"}}, "required": ["id", "name", "created_at", "updated_at"], "type": "object"}, "DatasetListResponse": {"properties": {"count": {"minimum": 0, "type": "integer"}, "datasets": {"items": {"$ref": "#/components/schemas/DatasetResponse"}, "type": "array"}}, "required": ["datasets", "count"], "type": "object"}, "DatasetResponse": {"allOf": [{"$ref": "#/components/schemas/Dataset"}, {"properties": {"datapoint_count": {"minimum": 0, "type": "integer"}}, "required": ["datapoint_count"], "type": "object"}]}, "DeletedTrace": {"properties": {"spans_deleted": {"minimum": 0, "type": "integer"}, "trace_id": {"type": "string"}}, "required": ["trace_id", "spans_deleted"], "type": "object"}, "EnqueueRequest": {"properties": {"datapoint_ids": {"items": {"type": "string"}, "type": "array"}}, "required": ["datapoint_ids"], "type": "object"}, "EnqueueResponse": {"properties": {"enqueued": {"minimum": 0, "type": "integer"}}, "required": ["enqueued"], "type": "object"}, "ExportData": {"properties": {"traces": {"additionalProperties": {"items": {"$ref": "#/components/schemas/Span"}, "type": "array"}, "propertyNames": {"type": "string"}, "type": "object"}}, "required": ["traces"], "type": "object"}, "ExportParams": {"properties": {"trace_id": {"type": ["string", "null"]}}, "type": "object"}, "ExportSpanRequest": {"properties": {"span_id": {"type": "string"}}, "required": ["span_id"], "type": "object"}, "FailSpanRequest": {"properties": {"error": {"type": "string"}}, "required": ["error"], "type": "object"}, "FileListResponse": {"properties": {"count": {"minimum": 0, "type": "integer"}, "files": {"items": {"$ref": "#/components/schemas/FileVersion"}, "type": "array"}}, "required": ["files", "count"], "type": "object"}, "FileQueryParams": {"properties": {"path_prefix": {"type": ["string", "null"]}, "since": {"format": "date-time", "type": ["string", "null"]}, "until": {"format": "date-time", "type": ["string", "null"]}}, "type": "object"}, "FileVersion": {"properties": {"created_at": {"format": "date-time", "type": "string"}, "created_by_span": {"type": ["string", "null"]}, "hash": {"type": "string"}, "path": {"type": "string"}, "size": {"format": "int64", "minimum": 0, "type": "integer"}}, "required": ["hash", "path", "size", "created_at"], "type": "object"}, "FileVersionsResponse": {"properties": {"count": {"minimum": 0, "type": "integer"}, "path": {"type": "string"}, "versions": {"items": {"$ref": "#/components/schemas/FileVersion"}, "type": "array"}}, "required": ["path", "versions", "count"], "type": "object"}, "GroupByField": {"enum": ["model", "provider", "kind", "status", "trace", "day", "hour"], "type": "string"}, "HealthResponse": {"properties": {"instance": {"type": ["string", "null"]}, "region": {"type": ["string", "null"]}, "status": {"type": "string"}, "storage": {"$ref": "#/components/schemas/StorageHealth"}, "uptime_secs": {"format": "int64", "minimum": 0, "type": "integer"}, "version": {"type": "string"}}, "required": ["status", "uptime_secs", "version", "storage"], "type": "object"}, "ImportResponse": {"properties": {"dataset_id": {"type": "string"}, "imported": {"minimum": 0, "type": "integer"}}, "required": ["imported", "dataset_id"], "type": "object"}, "Message": {"properties": {"content": {"type": "string"}, "role": {"type": "string"}}, "required": ["role", "content"], "type": "object"}, "MetricValues": {"properties": {"avg_latency_ms": {"format": "double", "type": ["number", "null"]}, "error_count": {"format": "int64", "minimum": 0, "type": ["integer", "null"]}, "span_count": {"format": "int64", "minimum": 0, "type": ["integer", "null"]}, "total_cost": {"format": "double", "type": ["number", "null"]}, "total_input_tokens": {"format": "int64", "minimum": 0, "type": ["integer", "null"]}, "total_output_tokens": {"format": "int64", "minimum": 0, "type": ["integer", "null"]}, "total_tokens": {"format": "int64", "minimum": 0, "type": ["integer", "null"]}}, "type": "object"}, "ModelCost": {"properties": {"cost": {"format": "double", "type": "number"}, "model": {"type": "string"}, "span_count": {"minimum": 0, "type": "integer"}}, "required": ["model", "cost", "span_count"], "type": "object"}, "ModelTokens": {"properties": {"input_tokens": {"format": "int64", "minimum": 0, "type": "integer"}, "model": {"type": "string"}, "output_tokens": {"format": "int64", "minimum": 0, "type": "integer"}, "total_tokens": {"format": "int64", "minimum": 0, "type": "integer"}}, "required": ["model", "input_tokens", "output_tokens", "total_tokens"], "type": "object"}, "QueueCounts": {"properties": {"claimed": {"minimum": 0, "type": "integer"}, "completed": {"minimum": 0, "type": "integer"}, "pending": {"minimum": 0, "type": "integer"}}, "required": ["pending", "claimed", "completed"], "type": "object"}, "QueueItem": {"properties": {"claimed_at": {"format": "date-time", "type": ["string", "null"]}, "claimed_by": {"type": ["string", "null"]}, "created_at": {"format": "date-time", "type": "string"}, "datapoint_id": {"type": "string"}, "dataset_id": {"type": "string"}, "edited_data": {}, "id": {"type": "string"}, "original_data": {}, "status": {"$ref": "#/components/schemas/QueueItemStatus"}}, "required": ["id", "dataset_id", "datapoint_id", "status", "created_at"], "type": "object"}, "QueueItemStatus": {"enum": ["pending", "claimed", "completed"], "type": "string"}, "QueueListResponse": {"properties": {"counts": {"$ref": "#/components/schemas/QueueCounts"}, "items": {"items": {"$ref": "#/components/schemas/QueueItem"}, "type": "array"}}, "required": ["items", "counts"], "type": "object"}, "Span": {"properties": {"ended_at": {"format": "date-time", "type": ["string", "null"]}, "id": {"type": "string"}, "input": {}, "kind": {"$ref": "#/components/schemas/SpanKind"}, "name": {"type": "string"}, "org_id": {"type": ["string", "null"]}, "output": {}, "parent_id": {"type": ["string", "null"]}, "started_at": {"format": "date-time", "type": "string"}, "status": {"$ref": "#/components/schemas/SpanStatus"}, "trace_id": {"type": "string"}}, "required": ["id", "trace_id", "name", "kind", "status", "started_at"], "type": "object"}, "SpanKind": {"oneOf": [{"properties": {"bytes_read": {"format": "int64", "minimum": 0, "type": "integer"}, "file_version": {"type": ["string", "null"]}, "path": {"type": "string"}, "type": {"enum": ["fs_read"], "type": "string"}}, "required": ["path", "bytes_read", "type"], "type": "object"}, {"properties": {"bytes_written": {"format": "int64", "minimum": 0, "type": "integer"}, "file_version": {"type": "string"}, "path": {"type": "string"}, "type": {"enum": ["fs_write"], "type": "string"}}, "required": ["path", "file_version", "bytes_written", "type"], "type": "object"}, {"properties": {"cost": {"format": "double", "type": ["number", "null"]}, "input_preview": {"type": ["string", "null"]}, "input_tokens": {"format": "int64", "minimum": 0, "type": ["integer", "null"]}, "model": {"type": "string"}, "output_preview": {"type": ["string", "null"]}, "output_tokens": {"format": "int64", "minimum": 0, "type": ["integer", "null"]}, "provider": {"type": ["string", "null"]}, "type": {"enum": ["llm_call"], "type": "string"}}, "required": ["model", "type"], "type": "object"}, {"properties": {"attributes": {"additionalProperties": {}, "propertyNames": {"type": "string"}, "type": "object"}, "kind": {"type": "string"}, "type": {"enum": ["custom"], "type": "string"}}, "required": ["kind", "type"], "type": "object"}]}, "SpanList": {"properties": {"count": {"minimum": 0, "type": "integer"}, "spans": {"items": {"$ref": "#/components/schemas/Span"}, "type": "array"}}, "required": ["spans", "count"], "type": "object"}, "SpanQueryParams": {"properties": {"kind": {"type": ["string", "null"]}, "model": {"type": ["string", "null"]}, "name_contains": {"type": ["string", "null"]}, "path": {"type": ["string", "null"]}, "provider": {"type": ["string", "null"]}, "since": {"format": "date-time", "type": ["string", "null"]}, "status": {"type": ["string", "null"]}, "trace_id": {"type": ["string", "null"]}, "until": {"format": "date-time", "type": ["string", "null"]}}, "type": "object"}, "SpanStatus": {"oneOf": [{"enum": ["running"], "type": "string"}, {"enum": ["completed"], "type": "string"}, {"properties": {"failed": {"properties": {"error": {"type": "string"}}, "required": ["error"], "type": "object"}}, "required": ["failed"], "type": "object"}]}, "Stats": {"properties": {"span_count": {"minimum": 0, "type": "integer"}, "trace_count": {"minimum": 0, "type": "integer"}}, "required": ["trace_count", "span_count"], "type": "object"}, "StorageHealth": {"properties": {"backend": {"type": "string"}, "span_count": {"minimum": 0, "type": "integer"}, "trace_count": {"minimum": 0, "type": "integer"}}, "required": ["trace_count", "span_count", "backend"], "type": "object"}, "SubmitRequest": {"properties": {"edited_data": {}}, "type": "object"}, "Trace": {"properties": {"ended_at": {"format": "date-time", "type": ["string", "null"]}, "id": {"type": "string"}, "machine_id": {"type": ["string", "null"]}, "name": {"type": ["string", "null"]}, "org_id": {"type": ["string", "null"]}, "started_at": {"format": "date-time", "type": "string"}, "tags": {"items": {"type": "string"}, "type": "array"}}, "required": ["id", "started_at"], "type": "object"}, "TraceListResponse": {"properties": {"count": {"minimum": 0, "type": "integer"}, "traces": {"items": {"$ref": "#/components/schemas/Trace"}, "type": "array"}}, "required": ["traces", "count"], "type": "object"}, "TrackedFile": {"properties": {"created_at": {"format": "date-time", "type": "string"}, "current_hash": {"type": "string"}, "path": {"type": "string"}, "updated_at": {"format": "date-time", "type": "string"}}, "required": ["path", "current_hash", "created_at", "updated_at"], "type": "object"}, "UpdateDatasetRequest": {"properties": {"description": {"type": ["string", "null"]}, "name": {"type": ["string", "null"]}}, "type": "object"}}}, "info": {"description": "LLM tracing and observability API", "license": {"name": ""}, "title": "llm-fs API", "version": "0.1.0"}, "openapi": "3.1.0", "paths": {"/api/openapi.json": {"get": {"operationId": "openapi_spec", "responses": {"200": {"description": "OpenAPI JSON specification"}}, "summary": "Get OpenAPI specification", "tags": ["docs"]}}}}
